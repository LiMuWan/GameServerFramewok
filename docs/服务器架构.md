# 服务器架构
## 高效的服务器
1. 算法比较好，时间，空间复杂度，稳定；
2. 不傻等在一个事务的处理上，等待一个事务处理的同时，可以相应另外的事务；
3. 发挥多核优势：多进程，多线程。多个核，可以同时执行多个线程/进程，不让CPU休息； 
4. 独立的拆分模块；

## 内存管理
1. 内存碎片
   - 内存碎片产生的原因；
   - 根据用户规模预先分配出来 --> cache；
   - 内存占用尽可能的要稳定，可控；
   - 控制你动态分配的内存的颗粒度：16,32,64,128,1024,2048,4096；   
2. 根据业务来自定义内存分配器
   - 根据预判的用户的规模，来分配好对应的内存池；
   - 内存池内的对象，可以重复使用的，提高malloc效率；

## netbus框架
1. 每个服务器，都是基于netbus框架；
2. 基于netbus框架来开发上面的每个服务器；
3. 通用模块：
   - 网络TCP/UDP/ Websocket;
   - 数据库mysql/redis模块；
   - timer模块，时间戳；
   - Log模块；
   - proto协议模块；
   - http模块；
   - json,base64,MD5,sha1;
   - service 业务服务 --> 来开发自己的业务逻辑；
   - ...

